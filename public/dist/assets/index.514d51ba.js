import{j as r,a as t,b as m,r as l,u as p,F as g,f as y,c as d,d as N,e as E,g as b,h as I,R,i as S,P as _,t as C}from"./vendor.b0ebff9c.js";const A=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};A();const u=({label:s,value:e})=>r("div",{className:"game-information-block",children:[t("div",{className:"game-information-block-label",children:s}),t("div",{className:"game-information-block-value",children:e})]}),G=({player:s,game:e})=>r("div",{className:"game-information",children:[t("div",{className:"logo",children:e.name}),t(u,{label:"Score",value:s.globalScore}),t(u,{label:"Temps",value:"00:00:00"})]});const h="CREATE_OR_GET_PLAYER",M=(s,e)=>n=>{m({method:"post",url:"http://localhost:5000/api/player/",data:{pseudo:s,gameId:e},withCredentials:!0}).then(o=>{o.data.step===1&&(o.data.step=2),n({type:h,payload:o.data})}).catch(o=>console.log(o))},O=({game:s,player:e})=>{const[n,o]=l.exports.useState(e.name||""),i=p(),a=c=>{c.preventDefault(),i(M(n,s._id))};return r("div",{className:"welcome-container",children:[r("div",{className:"title",children:["Bienvenue dans ",s.name]}),t("div",{className:"description",children:s.description}),r("div",{className:"pseudo-form",children:[r("div",{className:"pseudo-label",children:["Entrez votre pseudo pour commencer \xE0 jouer",t("div",{className:"pseudo-resume-game",children:"( ou pour reprendre une partie )"})]}),t("input",{className:"pseudo-input",type:"text",value:n,onChange:c=>o(c.target.value),placeholder:"Entrez votre pseudo"}),t("button",{className:"pseudo-submit",onClick:a,children:"Commencer"})]})]})},w=({player:s,game:e})=>{let n="";switch(s.step){case 1:n=t(O,{game:e,player:s});break}return t("div",{className:"mission-container",children:n})};const k=({mission:s,isActive:e=!1,isAchieved:n=!1})=>{const o=e?"":"is-disabled",i=n?t(g,{className:"mission-achieved-icon",icon:y}):"";return r("div",{className:`mission-information ${o}`,children:[r("div",{className:"mission-information-content",children:[t("div",{className:"mission-name",children:s.name}),t("div",{className:"mission-description",children:s.description})]}),i]})},x=({player:s})=>{const n=d(o=>o.missionReducer).map(o=>{const i=s.missionsAchieved.indexOf(o._id)!==-1;return t(k,{mission:o,isAchieved:i},o._id)});return r("div",{className:"missions-informations",children:[t("div",{className:"title",children:"Vos missions"}),t("div",{className:"mission-list",children:n})]})},f="GET_GAME_INFO",T=()=>s=>{m({method:"get",url:"http://localhost:5000/api/game/Hacky",withCredentials:!0}).then(e=>{s({type:f,payload:e.data})}).catch(e=>console.log(e))},v="GET_MISSIONS",P=s=>e=>{m({method:"get",url:`http://localhost:5000/api/mission/gameMissions/${s}`,withCredentials:!0}).then(n=>{e({type:v,payload:n.data})}).catch(n=>console.log(n))},$=()=>{const s=p(),e=d(o=>o.gameReducer),n=d(o=>o.playerReducer);return l.exports.useEffect(()=>{s(T())},[]),l.exports.useEffect(()=>{e._id&&s(P(e._id))},[e]),r("div",{className:"game-controller",children:[t(G,{game:e,player:n}),t(w,{game:e,player:n}),t(x,{player:n})]})};function L(){return t("div",{className:"App",children:t($,{})})}const D={name:""};var F=(s=D,e)=>{switch(e.type){case f:return e.payload}return s};const j=[];var B=(s=j,e)=>{switch(e.type){case v:return e.payload}return s};const z={name:"",step:1,globalScore:0,missionsAchieved:[]};var H=(s=z,e)=>{switch(e.type){case h:return e.payload}return s},W=N({gameReducer:F,missionReducer:B,playerReducer:H});const Y=E(W,b(I(C)));R.render(t(S.StrictMode,{children:t(_,{store:Y,children:t(L,{})})}),document.getElementById("root"));
